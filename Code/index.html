
<!doctype html>
<html lang="en" class="no-js">
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
    <!-- BROWSER TAB LOGO AND TITLE -->
      <link rel="shortcut icon" href="../assets/images/DownHILL.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.4">
    
        <title>DownHill</title>

      <link rel="stylesheet" href="../assets/stylesheets/main.77f3fd56.min.css">
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.7fa14f5b.min.css">                  
          
          <meta name="theme-color" content="#2094f3">
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
 
  </head>
  
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue">
 
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
       
        <a href="#forces" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DownHILL" class="md-header__button md-logo" aria-label="DownHILL">
      <!-- LOGO FOR BANNER -->
      <img src="../assets/images/DownHILL.png" alt="DownHILL" width="50" height="50"> 
    </a>
    
    <label class="md-header__button md-icon" for="__drawer">
      <!-- LOGO FOR BANNER -->
    <img src="../assets/images/DownHILL.png" alt="DownHILL" width="50" height="50"> 
    </label>                                                        
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic"> <!-- data-md-component="header-topic"> -->
          <!-- TITLE OF BANNER -->
          <span class="md-ellipsis">            
              DownHILL       
          </span>
        </div>
         <div class="md-header__topic" data-md-component="header-topic">
          
            <span class="md-ellipsis">
              DownHILL          
            </span>
          </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">

      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
     
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
   
<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
   <label class="md-nav__title" for="__drawer">
    <a href="." title="Senior Project" class="md-nav__button md-logo" aria-label="Senior Project">
      <!-- MENU LOGO FOR MOBILE -->
      <img src="../assets/images/DownHILL.png" alt="DownHILL" width="50" height="50">
      <!-- MENU TITLE FOR DESKTOP-->
    </a>
    <u>DownHILL - Senior Project</u>
  </label>
     
     <ul class="md-nav__list" data-md-scrollfix>
    
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
       <!-- MENU TITLE FOR MOBILE -->
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Code
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Code
      </a>    
    </li>

  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                 
                  </div>
                </div>
              </div>
            
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                  <h1>Code</h1>
                
                <h2 id="forces">Javascript Objects:</h2>
                <p>This program uses two objects, Street and Intersection. Street is created for an array to search for a desired address quickly. Intersection is created for an array to store data for ID, North, East, South and West Streets connected to the Intersection, as well and the lat/lng coordinates of the intersection </p>
                <pre><code>  
      function Street(blck,name){
        this.Block = blck;
        this.Name = name;
      }
      function Intersection(id,north,east,south,west,elev,coord){
        this.Id = id;
        this.North = north;
        this.East = east;
        this.South = south;
        this.West = west;
        this.Coord = "" + coord;
      }
                </code></pre>

              <div></div>
              <h2 id="forces">Google Maps - Reverse Geocoding API Request:</h2>
              <p>Grabbing the address inputs, it will check whether the inputs are coordinates or readable addresses. If they are coordinates, then it calls the Reverse Geocoding Request to get a readable address to the coordinates.</p>
               <pre><code>
    //START INPUT
    //Check if it has a left bracket indicating the user input lat lng
    if(start.charAt(2) == '.'){
      startCoord = start;
      //used source for concatinating geocode api url and lat/lng with api key added at the end
      axios.get('https:maps.googleapis.com/maps/api/geocode/json',{
        params:{
          latlng: start,
          key:'AIzaSyDXv29cjGoYgAy0VD5MVexGcdlXwd0eohg'
        }
      })
     .then(function(response){  
       //combining block number and street name from geocoded results
       var startAddy = response.data.results[0].address_components[0].short_name + " " + response.data.results[0].address_components[1].short_name;
       if (startAddy.charAt(3) == "-"){       //if street is formatted "123-321 Test St"
         var block = startAddy.substring(0,3);
         var st = startAddy.substring(8);     
         startAddy = block + " " + st;
       }
       else if(startAddy.charAt(4) == "-"){      //if street is formatted "1234-4321 Test St"
         block = startAddy.substring(0,4);
         st = startAddy.substring(10);
         startAddy = block + " " + st;
       }
       //converting JSON obj into string
       startOutput = `${startAddy}`;
                 
               </code></pre> 
              <div></div>
              <h2 id="forces">Google Maps - Elevation API Request:</h2>
              <p>Using the starting Intersection ID, it grabs the coordinates of the Intersection. Converts it into a lat/lng object, then sends the request to get the elevation of the coordinates.</p>
            <pre><code>
    //Getting the elevation of the starting intersection
      const latlng = Intersections[sInterID].Coord.split(',');
      var location = new google.maps.LatLng(latlng[0],latlng[1]);
      const elevator = new google.maps.ElevationService();
      elevator.getElevationForLocations({
        locations: [location],
      })
      .then(({ results }) => {  
        if(results[0]){                    //Anything else that needs to be done in sequence, has to be inside this if statement
          if(lastE == 0) lastE = results[0].elevation;              
          else {
            distance += lastE - results[0].elevation;
            lastE = results[0].elevation;
          }      
            </code></pre>
              <div></div>
            <h2 id="forces">Google Maps - Directions Service API Request:</h2>
        <pre><code>
//Creates the routes to display on map
  async function createRoute() {
    var p = document.getElementById("path").innerHTML;
    const paths = p.split(":");
    for(let i = 0; i < paths.length - 1; i++){
      directionsService = new google.maps.DirectionsService();
      directionsRenderer = new google.maps.DirectionsRenderer({suppressMarkers: true,preserveViewport: true});  //removes markers and doesnt re-center map to the route
      var response = displayRoute(directionsService, directionsRenderer).then(
        function(response){   
          directionsRenderer.setDirections(response);
          directionsRenderer.setMap(map);
        },        
        function(error){
          console.log("ERROR IN CONTROLLER " + error);
        }
      );
      await delay(250);          //Sets delay to allow api request to process before going to the next route
    }
    index = 0;
  }
  document.getElementById("route").addEventListener("click", createRoute);

                
              </code></pre>
            
            </article>
          </div>
        </div>
      </main>
    
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.9b151c6a.min.js"></script>
      
    
  </body>
</html>
